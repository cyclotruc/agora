<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agora</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='75' font-size='75'>ðŸ’¬</text></svg>">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Sora:wght@400;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://www.nerdfonts.com/assets/css/webfont.css">
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
    <h1><i class="nf nf-oct-comment_discussion"></i> Agora Simulator</h1>
    <canvas id="gameCanvas"></canvas>

    <!-- Side Panel -->
    <div id="sidePanel" class="side-panel collapsed">
        <button id="togglePanel" class="toggle-panel-btn" onclick="toggleSidePanel()">
            <span class="chevron">â–¶</span>
        </button>
        <div class="panel-content">
            <h2>Controls</h2>

            <!-- Agent Management -->
            <div class="panel-section">
                <h3>Agent Management</h3>
                <input type="text" id="agentName" class="panel-input" placeholder="Agent name..." maxlength="50">
                <textarea id="agentInstructions" class="panel-input" placeholder="Agent personality/instructions..." rows="3" maxlength="500"></textarea>
                <button id="createAgentBtn" class="panel-btn" onclick="createAgent()">Create Agent</button>
                <div id="agentsList" style="margin-top: 10px;"></div>
            </div>

            <!-- Chat Section -->
            <div class="panel-section">
                <h3>Chat</h3>
                <input type="text" id="chatInput" class="panel-input" placeholder="Type a message..." maxlength="100">
                <button id="sayButton" class="panel-btn">Say</button>
            </div>

            <!-- Character Selection -->
            <div class="panel-section">
                <h3>Character Selection</h3>
                <select id="characterSelect" class="panel-select">
                </select>
                <button id="loadCharacterBtn" class="panel-btn">Load Character</button>
            </div>

            <!-- Visibility Settings -->
            <div class="panel-section">
                <h3>Visibility Settings</h3>
                <label class="checkbox-label">
                    <input type="checkbox" id="hidePlayer" onchange="togglePlayerVisibility()">
                    <span>Hide Player</span>
                </label>
                <label class="checkbox-label">
                    <input type="checkbox" id="hideAllCharacters" onchange="toggleAllCharactersVisibility()">
                    <span>Hide All Characters</span>
                </label>
            </div>

            <!-- Display Settings -->
            <div class="panel-section">
                <h3>Display Settings</h3>
                <label class="checkbox-label">
                    <input type="checkbox" id="showNameTags" onchange="toggleNameTags()" checked>
                    <span>Show Name Tags</span>
                </label>
                <label class="label-row">
                    <span>Name Size:</span>
                    <input type="range" id="nameSize" min="50" max="200" value="100" oninput="updateNameSize(this.value)">
                    <span id="nameSizeValue">100%</span>
                </label>
                <label class="label-row">
                    <span>Bubble Text:</span>
                    <input type="range" id="bubbleSize" min="50" max="200" value="100" oninput="updateBubbleSize(this.value)">
                    <span id="bubbleSizeValue">100%</span>
                </label>
            </div>

            <!-- Overlay Settings -->
            <div class="panel-section">
                <h3>Overlay Settings</h3>
                <label class="label-row">
                    <span>Theme:</span>
                    <select id="overlaySelect" onchange="changeOverlay(this.value)" class="panel-select">
                    </select>
                </label>
                <label class="checkbox-label">
                    <input type="checkbox" id="showOverlay" onchange="toggleOverlay()" checked>
                    <span>Show Overlay</span>
                </label>
                <label class="label-row">
                    <span>Opacity:</span>
                    <input type="range" id="overlayOpacity" min="0" max="100" value="100" oninput="updateOverlayOpacity(this.value)">
                    <span id="opacityValue">100%</span>
                </label>
                <label class="label-row">
                    <span>Layer:</span>
                    <select id="overlayLayer" onchange="updateOverlayLayer(this.value)" class="panel-select-small">
                        <option value="background">Background</option>
                        <option value="foreground">Foreground</option>
                    </select>
                </label>
            </div>

            <!-- Game Control -->
            <div class="panel-section">
                <h3>Game Control</h3>
                <div class="test-buttons">
                    <button onclick="startGame()" class="panel-btn" style="background: #4ECDC4;">Start Auto-Play</button>
                    <button onclick="stopGame()" class="panel-btn" style="background: #FF6B6B;">Stop Auto-Play</button>
                    <button onclick="executeTurn()" class="panel-btn" style="background: #FFD93D;">Execute Turn</button>
                </div>
            </div>
        </div>
    </div>
    <script src="/static/game.js"></script>
</body>
</html>